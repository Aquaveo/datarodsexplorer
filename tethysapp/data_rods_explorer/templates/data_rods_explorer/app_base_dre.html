{% extends "tethys_apps/app_base.html" %}
{% load tethys_gizmos %}
{% load static %}
{% block title %}{{ tethys_app.name }}{% endblock %}

{% block htmltag %}
    <!--[if IE 7]> <html lang="en" class="ie ie7"> <![endif]-->
    <!--[if IE 8]> <html lang="en"  class="ie ie8"> <![endif]-->
    <!--[if IE 9]> <html lang="en"  class="ie9"> <![endif]-->
    <!--[if gt IE 8]><!--> <html lang="en" > <!--<![endif]-->
{% endblock %}




    {% block meta %}
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="generator" content="Django" />
    {% endblock %}

    {% block global_scripts %}
        <script src="//code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script>
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js" type="text/javascript"></script>
    {% endblock %}
{% block app_icon %}
  <img src="{% if 'http' in tethys_app.icon %}{{ tethys_app.icon }}{% else %}{% static tethys_app.icon %}{% endif %}" />
{% endblock %}

    <div id="app-content-wrapper" class="show-nav">
                <div class="tethys-app-header" style="background: {{ tethys_app.color|default:'#1b95dc' }};">
                </div>
        {% block app_content_override %}
            <div id="app-content">
                {% block flash %}
                    <div class="flash-messages">
                        <div id="query-point-info" class="alert alert-info alert-dismissible" role="alert">
                            <b><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                                Click on the map to define data query location, or enter a coordinate:
                                <input type="number" min="-180" max="180" id="lon" placeholder="Longitude" style="width: 100px">
                                <input type="number" min="-90" max="90" id="lat" placeholder="Latitude" style="width: 100px">
                                <button type="button" id="btn-addPoint">Go</button>
                            </b></div>
                    </div>
                {% endblock %}

                                {% block app_navigation_items %}
                                    <li class="title">Product-Model</li>
                                    <div style="padding-left:20px;padding-bottom:10px;">
                                        {% gizmo select_input select_model %}
                                        <li>Select Variable</li>
                                        <select id="variable" name='var_case' class="form-control" style="width:100%;" onchange="oc_variable();"></select>
                                        <li class="separator"></li>
                                        <li>Select Map date & time</li>
                                        {% gizmo date_picker select_date %}
                                        {% gizmo select_input select_hour %}

                                        <form id="parametersForm" name="parametersForm">
                                            {% csrf_token %}
                                            <input name="lonW" id="lonW" value=-107 hidden>
                                            <input name="latS" id="latS" value=24 hidden>
                                            <input name="lonE" id="lonE" value=-95 hidden>
                                            <input name="latN" id="latN" value=30 hidden>
                                            <input name="zoom" id="zoom" value=4.25 hidden>
                                            <input name="centerX" id="centerX" value=-96.5 hidden>
                                            <input name="centerY" id="centerY" value=38.5 hidden>
                                            <input name="pointLonLat" id="pointLonLat" value=-9999 hidden>
                                            <button id="btnDisplayMap" type="button" class="btn btn-default" onclick="load_map()">Display map</button>
                                        </form>
                                    </div>

                                    <li class="nav-divider"></li>
                                    <li style="padding-top:0px;" class="title">Time series</li>
                                    <li><a class="nav-link" href="javascript:void(0)" onclick="onClickLink(this, 'plot');">Plot one variable</a></li>
                                    <div id="nav-plot" class="nav-item hidden" style="padding-left:30px;padding-bottom:15px;">
                                        <label style="padding-top:15px;">Start date:</label>
                                        {% gizmo date_picker start_date1 %}
                                        <label>End date:</label>
                                        {% gizmo date_picker end_date1 %}
                                        {% gizmo button plot_button1 %}
                                    </div>
                                    <li><a class="nav-link" href="javascript:void(0)" onclick="onClickLink(this, 'plot2');">Compare two variables</a></li>
                                    <div id="nav-plot2" class="nav-item hidden" style="padding-left:30px;padding-bottom:15px;">
                                        <label style="padding-top:15px;">Select Second Model</label>
                                        {% gizmo select_input select_model2 %}
                                        <label for="variable2">Select Second Variable</label>
                                        <select id="variable2" name='var_case2' class="form-control" style="width:100%;" onchange="oc_variable2(); "></select>
                                        <label style="padding-top:15px;">Start date:</label>
                                        {% gizmo date_picker start_date2 %}
                                        <label>End date:</label>
                                        {% gizmo date_picker end_date2 %}
                                        {% gizmo button plot_button2 %}
                                    </div>
                                    <li><a class="nav-link" style="padding-bottom:15px;" href="javascript:void(0)" onclick="onClickLink(this, 'years');">Year-on-year changes</a></li>
                                    <div id="nav-years" class="nav-item hidden" style="padding-left:30px;padding-bottom:15px;">
                                        <label style="padding-top:15px;">Select years:</label>
                                        {% gizmo select_input select_years %}
                                        <fieldset>
                                            <input id="plot-overlapped" type="checkbox" checked>
                                            <label for="plot-overlapped">Overlay years</label>
                                        </fieldset>
                                        {% gizmo button plot_button3 %}
                                    </div>
                                {% endblock %}

                {# App content starts here #}
                <div id="inner-app-content">
                    {% block app_content %}
                        <div id="map-loading" class="hidden">
                            <img src="/static/data_rods_explorer/images/main-loading-anim.gif" />
                        </div>
                        {% gizmo map_view map_view_options %}
                        <div style="position: relative;">
                            <div id="plot-loading" class="hidden">
                                <img src="/static/data_rods_explorer/images/main-loading-anim.gif" />
                            </div>
                            <br>
                            <div id="plot-container"></div>
                        </div>
                    {% endblock %}


                    {% block app_actions_override %}<!-- Footer Banner-->
                            {% block app_actions %}
                                <div id="app-actions">
                                    <div id="nasaRequestOutput"></div>
                                    <img id="png-data-rods" src="{{ STATIC_URL}}data_rods_explorer/images/nasa_logo.png">
                                </div>
                            {% endblock %}
                    {% endblock %}
                </div>
            </div>
        {% endblock %}
    </div>

{% block scripts %}
    {{ block.super }}
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" />
    <!--<link href="{% static 'tethys_apps/css/app_base.css' %}" rel="stylesheet" /> No Longer Needed in Tethys 3-->
    <link href="{% static 'data_rods_explorer/css/main.css' %}" rel="stylesheet"/>
    <script src="{% static 'tethys_apps/vendor/cookies.js' %}" type="text/javascript"></script>
    <script src="{% static 'tethys_apps/js/app_base.js' %}" type="text/javascript"></script>
    {% gizmo_dependencies %}
    <script src="{% static 'data_rods_explorer/vendor/highcharts4.1.7/hc.js' %}" type="text/javascript"></script>
    <script src="{% static 'data_rods_explorer/vendor/highcharts4.1.7/hc-more.js' %}" type="text/javascript"></script>
    <!-- <script src="{% static 'data_rods_explorer/vendor/highcharts4.1.7/exp.js' %}" type="text/javascript"></script> -->
    <script src="{% static 'data_rods_explorer/vendor/highcharts4.1.7/exporting.js' %}" type="text/javascript"></script>
    <script src="{% static 'data_rods_explorer/vendor/highcharts4.1.7/export-csv.js' %}" type="text/javascript"></script>
    <script src="{% static 'data_rods_explorer/js/helpers.js' %}?v1.06" type="text/javascript"></script>
    <script src="{% static 'data_rods_explorer/js/load_pages.js' %}?v1.01" type="text/javascript"></script>
    <script src="{% static 'data_rods_explorer/js/on_change.js' %}?v1.02" type="text/javascript"></script>
    <script src="{% static 'data_rods_explorer/js/custom_plots.js' %}?v1.01" type="text/javascript"></script>
    <script src="{% static 'data_rods_explorer/js/model_objects.js' %}?v1.01" type="text/javascript"></script>
    <script src="{% static 'data_rods_explorer/js/main.js' %}?v1.02" type="text/javascript"></script>
    <script>
        setVarDict("{{ VAR_DICT }}");
        setModelFences("{{ MODEL_FENCES }}");
        setDataRodsTSB("{{ DATARODS_TSB }}");
        setDataRodsPNG("{{ DATARODS_PNG }}");
        setWMSVars("{{ WMS_VARS }}");
        $(function () {
            loadDefaultHome();
            loadVariableOptions('model', 'variable');
        });
    </script>
{% endblock %}
